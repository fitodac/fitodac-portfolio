/* ASGmaps 1.2 | MIT License */
window.ASGmaps_Gmaps_Load=function(){if(typeof window.ASGmaps!=="object"){return false}if(window.ASGmaps.loaded||typeof google==="object"&&typeof google.maps==="object"){return window.ASGmaps_Gmaps_Callback()}var e=document.createElement("script");e.setAttribute("type","text/javascript");e.setAttribute("src","http://maps.google.com/maps/api/js?key=AIzaSyATrCnBF0jCtHdYGcR-kC-jCRoAJDAJz4k&sensor=false&callback=ASGmaps_Gmaps_Callback");(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(e)};window.ASGmaps_Gmaps_Callback=function(){if(typeof window.ASGmaps!=="object"){return false}return window.ASGmaps.init()};var ASGmaps_Factory=function(){};ASGmaps_Factory.prototype={constructor:ASGmaps_Factory,debug:true,debug_type:"console",loaded:false,geocoder:null,map_class_selector:"map",maps:[],resizeListener:null,loadGmaps:function(){this.loaded?this.init():window.ASGmaps_Gmaps_Load()},init:function(){if(!this.loaded){this.loaded=true;this.geocoder=new google.maps.Geocoder;var e=document.getElementsByClassName(this.map_class_selector);var t=e.length;if(t>0){var n;for(n=0;n<t;++n){this.addMap(e[n],n)}var r=this;this.resizeListener=google.maps.event.addDomListener(window,"resize",function(){var e=r.maps.length;if(e>0){var t;for(t=0;t<e;++t){r.maps[t].resize()}}})}return true}},addMap:function(e,t){var n=new ASGmaps_Map(e);n.init()?this.maps[t]=n:this.debugMessage("Map can't initalize",n.element.id,"error")},debugMessage:function(e,t,n){n="string"!==typeof n?"message":n;t="string"!==typeof t?"-":t;e="string"!==typeof e?"":e;if(e!==""&&this.debug){var r="ASGmaps "+n+": "+e+" ("+t+")";if(this.debug_type==="alert"){alert(r)}else{console.log(r)}}},ajaxCall:function(e,t,n){var r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");r.onreadystatechange=function(){if(r.readyState===4){if(r.status===200){if(typeof t==="function"){t(r.responseText)}}else{if(typeof n==="function"){n()}}}};r.open("GET",e,true);r.send()},isJSON:function(e){try{var t=JSON.parse(e);if(t&&typeof t==="object"&&t!==null){return t}}catch(n){}return false},cloneObject:function(e){if(null===e||"object"!==typeof e){return e}var t=e.constructor();for(var n in e){if(e.hasOwnProperty(n)){t[n]=e[n]}}return t},mergeObjects:function(e,t){e=typeof e==="object"?e:{};t=typeof t==="object"?t:{};var n=this.cloneObject(e);var r;for(r in t){n[r]=t[r]}return n},decodeHtmlEntity:function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(t)})},encodeHtmlEntity:function(e){var t=[];for(var n=e.length-1;n>=0;n--){t.unshift(["&#",e[n].charCodeAt(),";"].join(""))}return t.join("")}};var ASGmaps_Map=function(e,t){this.element=e;this.options=t};ASGmaps_Map.prototype={constructor:ASGmaps_Map,options:null,element:null,map:null,bounds:null,fitMarkers:false,icon:null,markers:[],error:false,init:function(){var e=window.ASGmaps.mergeObjects(this.getDefaultOptions(),this.options);this.map=new google.maps.Map(this.element,this.sanitizeGmapOptions(e));this.bounds=new google.maps.LatLngBounds;this.error=!(this.putDefaultCenter()||this.putDefaultAddress());if(!this.error){this.putDefaultZoom();var t=this.getElementData("icon");if("object"===typeof t){this.icon=t}this.fitMarkers=Boolean(this.getElementData("fitMarkers"));this.putDefaultMarkers()}return!this.error},resize:function(){var e=this.map.getCenter();google.maps.event.trigger(this.map,"resize");this.map.setCenter(e)},getDefaultGmapOptions:function(){return{zoom:8,streetViewControl:false,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:true,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU},panControl:true,zoomControl:true,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL}}},sanitizeGmapOptions:function(e){e=typeof e==="object"?e:{};var t=this.getDefaultGmapOptions();return window.ASGmaps.mergeObjects(t,e)},getDefaultOptions:function(){return this.getElementData("options")},setDefaultOptions:function(e){return this.setElementData("options",e)},getDefaultCenter:function(){return this.getElementData("geolocation")},setDefaultCenter:function(e){return this.setElementData("geolocation",e)},putDefaultCenter:function(){var e=this.getDefaultCenter();if(e!==""){e=e.split(",");this.map.setCenter(new google.maps.LatLng(parseFloat(e[0]),parseFloat(e[1])));return true}return false},getDefaultMarkers:function(){return this.getElementData("markers")},setDefaultMarkers:function(e){return this.setElementData("markers",e)},putDefaultMarkers:function(){var e=this.getDefaultMarkers();if(typeof e==="object"){var t=e.length;if(t>0){var n;for(n=0;n<t;++n){this.addMarker(e[n])}}return true}return false},getDefaultAddress:function(){return this.getElementData("address")},setDefaultAddress:function(e){return this.setElementData("address",e)},putDefaultAddress:function(){var e=this.getDefaultAddress();if(e!==""){var t=this.map;window.ASGmaps.geocoder.geocode({address:e},function(e,n){if(n===google.maps.GeocoderStatus.OK){t.setCenter(e[0].geometry.location)}});return true}return false},getDefaultZoom:function(){return this.getElementData("zoom")},setDefaultZoom:function(e){return this.setElementData("zoom",e)},putDefaultZoom:function(){var e=this.getDefaultZoom();if(e!==""){this.map.setZoom(parseInt(e));return true}return false},addMarker:function(e,t){var n=new ASGmaps_Marker(e,this);n.init()?this.markers[t]=n:window.ASGmaps.debugMessage("Marker can't added",t,"error")},deleteMarker:function(e){if(this.markers[e]!=="undefined"&&this.markers[e]!==null){this.markers[e].overlay.setMap(null);this.markers[e]=null;delete this.markers[e];return true}return false},clearMarkers:function(){if(typeof markers==="object"){var e=markers.length;if(e>0){var t;for(t=0;t<e;++t){this.deleteMarker(t)}}return true}},getElementData:function(e,t){t="undefined"===typeof t?"":t;var n=this.element.dataset.hasOwnProperty(e)?this.element.dataset[e]:t;var r=window.ASGmaps.isJSON(n);return r?r:n==="1"||n.toLowerCase()==="true"||n.toLowerCase()==="on"?true:n},setElementData:function(e,t){return this.element.dataset[e]=t}};var ASGmaps_Marker=function(e,t){this.data=e;this.asgmap=t};ASGmaps_Marker.prototype={constructor:ASGmaps_Marker,asgmap:null,data:null,latlng:null,overlay:null,icon:null,infoWindow:null,ajaxInfoWindowCalling:false,init:function(){this.initIcon();if(typeof this.data.latitude!=="undefined"&&this.data.latitude!==""&&typeof this.data.longitude!=="undefined"&&this.data.longitude!==""){this.latlng=new google.maps.LatLng(this.data.latitude,this.data.longitude);this.showMarker();return true}else if(typeof this.data.address!=="undefined"&&this.data.address!==""){var e=this;window.ASGmaps.geocoder.geocode({address:this.data.address},function(t,n){if(n===google.maps.GeocoderStatus.OK){e.latlng=t[0].geometry.location;e.showMarker()}});return true}return false},initIcon:function(){this.icon=typeof this.data.icon!=="undefined"?this.data.icon:window.ASGmaps.cloneObject(this.asgmap.icon);if(this.icon!==null){typeof this.icon.anchor==="object"?this.icon.anchor=new google.maps.Point(this.icon.anchor[0],this.icon.anchor[1]):delete this.icon.anchor;typeof this.icon.origin==="object"?this.icon.origin=new google.maps.Point(this.icon.origin[0],this.icon.origin[1]):delete this.icon.origin;typeof this.icon.size==="object"?this.icon.size=new google.maps.Size(this.icon.size[0],this.icon.size[1]):delete this.icon.size}},initInfoWindow:function(){this.infoWindow=new google.maps.InfoWindow},initInfoWindowContent:function(){if(typeof this.data.infoWindow!=="undefined"){var e=window.ASGmaps.decodeHtmlEntity(this.data.infoWindow);if(e!==""){this.infoWindow.setContent(e);var t=this;google.maps.event.addListener(this.overlay,"click",function(){t.infoWindow.open(t.asgmap.map,t.overlay)});return true}}return false},initInfoWindowAjax:function(){if(typeof this.data.infoWindowAjax!=="undefined"){var e=window.ASGmaps.decodeHtmlEntity(this.data.infoWindowAjax);if(e!==""){var t=this;google.maps.event.addListener(this.overlay,"click",function(){if(!t.ajaxInfoWindowCalling){t.ajaxInfoWindowCalling=true;window.ASGmaps.ajaxCall(e,function(e){t.ajaxInfoWindowCalling=false;t.infoWindow.setContent(e);t.infoWindow.open(t.asgmap.map,t.overlay)},function(){t.ajaxInfoWindowCalling=false})}});return true}}return false},initButton:function(){if(typeof this.data.url!=="undefined"){var e=window.ASGmaps.decodeHtmlEntity(this.data.url);if(e!==""){google.maps.event.addListener(this.overlay,"click",function(){window.location.href=e});return true}}return false},showMarker:function(){this.overlay=new google.maps.Marker({position:this.latlng,map:this.asgmap.map,icon:this.icon});if(this.asgmap.fitMarkers){this.asgmap.bounds.extend(this.latlng);this.asgmap.map.fitBounds(this.asgmap.bounds)}this.initInfoWindow();this.initInfoWindowAjax()||this.initInfoWindowContent()||this.initButton()}};window.ASGmaps=new ASGmaps_Factory;window.onload=function(){window.ASGmaps.loadGmaps()}